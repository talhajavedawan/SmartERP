<!-- ====================== SPLIT LAYOUT ====================== -->
<div class="split-container">
  <!-- ───── LEFT: Departments Grid ───── -->
  <div #leftPane class="pane left-pane">
    <app-grid
      [title]="'Departments'"
      [layoutKey]="GRID_LAYOUT_KEY"
      [columnDefs]="columnDefs"
      [rowData]="rowData"
      (rowClicked)="onRowClicked($event)"
      (onAdd)="navigateToCreateDepartment()"
      (onUpdate)="navigateToUpdateDepartment($event)"
      (onRefresh)="refreshDepartments()"
    >
      <ng-container headerActions>
        <div class="status-btn-group btn-group btn-group-sm me-2" role="group">
          <button
            class="btn status-btn all"
            [class.active]="selectedStatus === 'all'"
            (click)="setFilterState('all')"
          >
            <i class="bi bi-grid-fill me-1"></i> All
          </button>
          <button
            class="btn status-btn active"
            [class.active]="selectedStatus === 'active'"
            (click)="setFilterState('active')"
          >
            <i class="bi bi-check-circle-fill me-1"></i> Active
          </button>
          <button
            class="btn status-btn inactive"
            [class.active]="selectedStatus === 'inactive'"
            (click)="setFilterState('inactive')"
          >
            <i class="bi bi-slash-circle-fill me-1"></i> Inactive
          </button>
        </div>

        <button
          class="btn btn-outline-primary btn-sm"
          (click)="toggleAllExpand()"
          title="Expand / Collapse"
        >
          <i
            class="bi {{ allExpanded ? 'bi-compress' : 'bi-expand' }} me-1"
          ></i>
          {{ allExpanded ? "Collapse" : "Expand" }} All
        </button>
      </ng-container>
    </app-grid>
  </div>

  <!-- ───── HORIZONTAL SPLITTER (left ↔ right) ───── -->
  <div class="splitter h-splitter" #hSplitter></div>

  <!-- ───── RIGHT: Companies (top) + Employees (bottom) ───── -->
  <div #rightPane class="pane right-pane">
    <!-- Companies pane -->
    <div #companiesPane class="sub-pane top-sub-pane modern-card">
      <h6 class="fw-semibold mb-3 text-secondary">Companies</h6>
      <ul class="list-group modern-list overflow-auto h-100">
        @for (c of selectedDepartment?.companies || []; track c.id) {
        <li class="list-group-item modern-item">
          {{ c.companyName }}
        </li>
        } @empty {
        <li class="list-group-item text-muted text-center py-3">
          No companies
        </li>
        }
      </ul>
    </div>

    <!-- Vertical splitter (Companies ↔ Employees) -->
    <div class="splitter v-splitter" #vSplitter></div>

    <!-- Employees pane -->
    <div #employeesPane class="sub-pane bottom-sub-pane modern-card">
      <h6 class="fw-semibold mb-3 text-secondary">Employees</h6>
      <ul class="list-group modern-list overflow-auto h-100">
        @for (e of selectedDepartment?.employees || []; track e.id) {
        <li class="list-group-item modern-item">
          {{ e.systemDisplayName }}
        </li>
        } @empty {
        <li class="list-group-item text-muted text-center py-3">
          No employees
        </li>
        }
      </ul>
    </div>
  </div>
</div>
