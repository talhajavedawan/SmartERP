<div class="balance-container p-3">
  <h5 class="fw-semibold text-primary mb-3">Leave Balance Overview</h5>

  <!-- ðŸ”„ Loading Spinner -->
  <div *ngIf="isLoading" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted">Fetching your balances...</p>
  </div>

  <!-- âš ï¸ Error Message -->
  <div *ngIf="errorMessage && !isLoading" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <!-- ðŸ“Š Balance Table -->
  <div *ngIf="!isLoading && !errorMessage">
    <table class="table table-hover table-striped align-middle">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Leave Type</th>
          <th>Max Days / Year</th>
          <th>Used Days</th>
          <th>Remaining Days</th>
          <th>Year</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of balances; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ b.leaveTypeName }}</td>
          <td>{{ b.maxDaysPerYear }}</td>
          <td>{{ b.usedDays }}</td>
          <td>
            <span
              class="badge"
              [ngClass]="{
                'bg-success': b.remainingDays > 5,
                'bg-warning text-dark': b.remainingDays <= 5 && b.remainingDays > 0,
                'bg-danger': b.remainingDays <= 0
              }"
            >
              {{ b.remainingDays }}
            </span>
          </td>
          <td>{{ b.year || 'N/A' }}</td>
        </tr>

        <tr *ngIf="balances.length === 0">
          <td colspan="6" class="text-center text-muted py-3">
            No balance data available.
          </td>
        </tr>
      </tbody>

      <!-- âœ… Totals Footer -->
      <tfoot *ngIf="balances.length > 0" class="table-light fw-semibold">
        <tr>
          <td colspan="3" class="text-end">Totals:</td>
          <td>{{ getTotalUsed() }}</td>
          <td>{{ getTotalRemaining() }}</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
