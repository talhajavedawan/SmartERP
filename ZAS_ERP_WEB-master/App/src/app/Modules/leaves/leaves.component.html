<!-- <div class="leave-main-container">
  <div class="card shadow-sm border-0 rounded-3 leave-card">
    
    <div class="d-flex justify-content-between align-items-center p-3 border-bottom bg-light">
      <h5 class="mb-0 fw-semibold text-primary">{{ pageTitle }}</h5>

      <div class="d-flex gap-2">
        <ng-container *ngIf="isMainPage">
          <input
            type="text"
            class="form-control form-control-sm"
            style="width: 220px"
            placeholder="Search leaves..."
            [(ngModel)]="searchText"
            (input)="onSearch()"
          />
          <button class="btn btn-outline-primary btn-sm" (click)="refreshList()">
            <i class="bi bi-arrow-clockwise me-1"></i> Refresh
          </button>
        </ng-container>

        <button class="btn btn-primary btn-sm" (click)="navigateTo('apply')">
          <i class="bi bi-plus-circle me-1"></i> Add Leave
        </button>

        <button class="btn btn-info btn-sm text-white" (click)="navigateTo('balance')">
          <i class="bi bi-graph-up me-1"></i> Track Balance
        </button>

        <button
          *ngIf="!isMainPage"
          class="btn btn-outline-secondary btn-sm"
          (click)="goBack()"
        >
          <i class="bi bi-arrow-left me-1"></i> Back to List
        </button>
      </div>
    </div>

    
    <div class="p-3">
      <div *ngIf="isMainPage; else childRoutes">
        <div class="table-responsive">
          <table class="table table-hover table-striped align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Leave Type</th>
                <th>Reason</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Total Days</th>
                <th>Status</th>
                <th>Approver</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let leave of filteredLeaves; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ leave.leaveType?.name }}</td>
                <td>{{ leave.reason }}</td>
                <td>{{ leave.fromDate | date: 'yyyy-MM-dd' }}</td>
                <td>{{ leave.toDate | date: 'yyyy-MM-dd' }}</td>
                <td>{{ leave.totalDays }}</td>
                <td>
                  <span
                    class="badge"
                    [ngClass]="{
                      'bg-success': leave.status === 'Approved',
                      'bg-danger': leave.status === 'Rejected',
                      'bg-warning text-dark': leave.status === 'Cancelled',
                      'bg-secondary': leave.status === 'Void',
                      'bg-info text-dark': leave.status === 'UnderApproval'
                    }"
                  >
                    {{ leave.status }}
                  </span>
                </td>
                <td>{{ leave.approverName || '-' }}</td>
              </tr>
              <tr *ngIf="filteredLeaves.length === 0">
                <td colspan="8" class="text-center text-muted py-3">
                  No leave records found.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <ng-template #childRoutes>
        <router-outlet></router-outlet>
      </ng-template>
    </div>
  </div>
</div> -->

<div class="leave-main-container">
  <div class="card shadow-sm border-0 rounded-3 leave-card">
    <!-- ✅ Header -->
    <div
      class="d-flex justify-content-between align-items-center p-3 border-bottom bg-light"
    >
      <h5 class="mb-0 fw-semibold text-primary">{{ pageTitle }}</h5>

      <div class="d-flex gap-2">
        <ng-container *ngIf="isMainPage">
          <input
            type="text"
            class="form-control form-control-sm"
            style="width: 220px"
            placeholder="Search leaves..."
            [(ngModel)]="searchText"
            (input)="onSearch()"
          />
          <button
            class="btn btn-outline-primary btn-sm"
            (click)="refreshList()"
          >
            <i class="bi bi-arrow-clockwise me-1"></i> Refresh
          </button>
        </ng-container>

        <button class="btn btn-primary btn-sm" (click)="navigateTo('apply')">
          <i class="bi bi-plus-circle me-1"></i> Add Leave
        </button>

        <button
          class="btn btn-info btn-sm text-white"
          (click)="navigateTo('balance')"
        >
          <i class="bi bi-graph-up me-1"></i> Track Balance
        </button>

        <button
          *ngIf="!isMainPage"
          class="btn btn-outline-secondary btn-sm"
          (click)="goBack()"
        >
          <i class="bi bi-arrow-left me-1"></i> Back to List
        </button>
      </div>
    </div>

    <!-- ✅ Body -->
    <div class="p-3">
      <div *ngIf="isMainPage; else childRoutes">
        <div class="table-responsive">
          <table class="table table-hover table-striped align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Leave Type</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Days</th>
                <th>Status</th>
                <th>Approver</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let leave of filteredLeaves; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ leave.leaveTypeName }}</td>
                <td>{{ leave.leaveDescription }}</td>
                <td>{{ leave.startDate | date : "yyyy-MM-dd" }}</td>
                <td>{{ leave.endDate | date : "yyyy-MM-dd" }}</td>
                <td>
                  {{
                    getLeaveDays(
                      leave.startDate,
                      leave.endDate,
                      leave.isHalfDay
                    ) | number : "1.0-1"
                  }}
                </td>

                <td>
                  <span
                    class="badge"
                    [ngClass]="{
                      'bg-success': leave.status === 'Approved',
                      'bg-danger': leave.status === 'Rejected',
                      'bg-warning text-dark': leave.status === 'Cancelled',
                      'bg-secondary': leave.status === 'Void',
                      'bg-info text-dark': leave.status === 'UnderApproval'
                    }"
                  >
                    {{ leave.status }}
                  </span>
                </td>
                <td>{{ leave.approverName || "-" }}</td>
              </tr>
              <tr *ngIf="filteredLeaves.length === 0">
                <td colspan="8" class="text-center text-muted py-3">
                  No leave records found.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <ng-template #childRoutes>
        <router-outlet></router-outlet>
      </ng-template>
    </div>
  </div>
</div>
